cap:
  name: CAP
  restart: cap_restart.yaml
#  run_phases: [GENERIC_RUN_CLOCK_ADVANCE]

  clock:
    start: 1891-03-01T00:00:00
    stop: 2999-03-02T21:00:00
    dt: PT900S
#    repeat_duration: P1Y
    segment_duration: P1H

  checkpointing:
    enabled: true
    final: true
    path: checkpoints
    alarms:
      - {frequency: PT6H, refTime: '1891-03-01T00:00:00'}
      - {times: ['1891-03-01T00:00:00']}
      - {offsets: ['P6H']} # relative to segment start

  root_name: &root GCM
  extdata_name: &extdata EXTDATA
  history_name: &history HIST

  mapl:
    children:
      *root :
        dso: libgcm_gc
        config_file: GCM.yaml
      *extdata :
        dso: libextdata_gc
        config_file: extdata.yaml
      *history :
        dso: libhistory_gc
        config_file: history.yaml

#####################################
# Global services
esmf:
  logKindFlag: ESMF_LOGKIND_MULTI_ON_ERROR
  defaultCalKind: ESMF_CALKIND_GREGORIAN
  logAppendFlag: false

mapl:
  model_petcount: 1
  pflogger: pflogger.yaml

  servers:
    mit:
      num_nodes: 4
      dso: libmit
      procedure_name: init_comm # pass comm with model + MIT resources

    pfio:
      num_nodes: 9

    model:
      num_nodes: any
